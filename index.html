<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Камень, ножницы, бумага</title>

  <link rel="stylesheet" href="/assets/css/styles.css">
</head>

<body>
  <div class="app"></div>

  <script>
    window.application = {
      blocks: {},
      screens: {},
      renderScreen: function (screenName) {
        //Проходимся по массиву timers
        for (let timer of window.application.timers) {
          clearInterval(timer) //отменяем setInterval на каждом элементе
          window.application.timers = []
          timer === undefined //очищаем массив
        }


        //Проверяем существует ли страница, которую передаем в функцию
        if (window.application.screens[screenName] === undefined) {
          console.log(`Страница ${screenName} не существует`)
          return;
        }
        //Вызываем функцию из поля screens 
        window.application.screens[screenName]()
        console.log(`Страница ${screenName} отрисована`)
      },

      renderBlock: function (blockName, container) {
        //Проверяем существует ли блок, который передаем в функцию
        if (window.application.blocks[blockName] === undefined) {
          console.log(`Блок ${blockName} не существует`)
          return;
        }
        //Вызываем функцию из поля blocks 
        window.application.blocks[blockName](container)
        console.log(`Блок ${blockName} отрисован`)
      },

      timers: []
    }

  </script>

  <script>
    /*Примеры для проверки, потом этот скрипт удалим*/


    //Добавляем функции в поле объекта
    window.application.blocks['example-button'] = renderExampleButton;
    window.application.blocks['example-input'] = renderExampleInput;

    //Добавляем таймер в массив (тестовые примеры)
    window.application.timers.push(setInterval(() => console.log('Example'), 1000))
    window.application.timers.push(setInterval(() => console.log('Example1'), 1000))
    window.application.timers.push(setInterval(() => console.log('Example2'), 1000))
    setTimeout(() => { window.application.renderScreen('example') }, 5000)

    function renderExampleButton(container) {

      const button = document.createElement('button');
      button.textContent = 'Кнопка'

      button.addEventListener('click', () => {
        console.log('click');
      });

      container.appendChild(button);
    }

    function renderExampleInput(container) {

      const input = document.createElement('input');


      input.addEventListener('click', () => {
        console.log('click');
      });

      container.appendChild(input);
    }


    //Добавляем функции в поле объекта
    window.application.screens['example'] = renderExampleScreen;
    window.application.screens['another-example'] = renderExampleAnotherScreen;

    function renderExampleScreen() {
      const app = document.querySelector('.app');
      app.textContent = '';

      const title = document.createElement('h1');
      title.textContent = 'Страница-пример';

      const content = document.createElement('div');

      renderExampleButton(content);

      app.appendChild(title);
      app.appendChild(content);
    }

    function renderExampleAnotherScreen() {
      const app = document.querySelector('.app');
      app.textContent = '';

      const title = document.createElement('h1');
      title.textContent = 'Еще одна страница-пример';

      const content = document.createElement('div');

      renderExampleInput(content);

      app.appendChild(title);
      app.appendChild(content);
    }
  </script>

  <script src="/assets/js/request.js"></script>
  <script src="/assets/js/screen_login.js"></script>
  <script src="/assets/js/screen_lobby.js"></script>
  <script src="/assets/js/screen_waiting-to-play.js"></script>
  <script src="/assets/js/screen_turn.js"></script>
  <script src="/assets/js/screen_waiting-for-enemy-turn.js"></script>
  <script src="/assets/js/screen_win.js"></script>
  <script src="/assets/js/screen_loose.js"></script>
</body>

</html>
</body>

</html>